// ================================================================================================
// File Name      : collapse.scss
// Description    : Adjustments for accordions that toggle the visibility of content.
// ------------------------------------------------------------------------------------------------
// Item Name      : xxx - Responsive Admin Theme
// Version        : 1.2
// Author         : MANOJ
// Author URL     : http://www.themeforest.net/user/xxx
// ================================================================================================

//
// DEFAULT ACCORDION TYPE
// ======================================================
// TODO https://www.codeply.com/go/506qHaPe9M

.accordion {
  .card {
    overflow: hidden
  }

  .card-header {
    position: relative;

    > i {
      float: left;
      margin-right: $accordion-icon-margin-left;
    }
  }

  [data-toggle="collapse"] {
    @include transition;
    @include add-border($card-border-size, transparent, top);
    @include add-border(0, transparent, bottom);
    color: $accordion-title-active-color;
    background-color: $accordion-header-active-bg;
    border-color: $card-border-color;
    cursor: $cursor-pointer;
    display: flex;
    align-items: flex-start;

    &:first-child {
      border-top: none;
    }

    & .card-title,
    & .card-subtitle {
      color: inherit
    }

    & .card-subtitle {
      @include opacity(0.8);
    }

    &:after {
      @extend %acc-pseudo
    }

    // Collapsed state
    &.collapsed {
      color: $accordion-title-color;
      background-color: $accordion-header-collapsed-bg;

      &:after {
        content: $accordion-icon-collapsed;
      }

      &:hover {
        background-color: $accordion-header-collapsed-hover-bg;
        color: $accordion-title-hover-color;
      }
    }

  }

  & .card-body {
    background-color: $accordion-body-bg;
  }

  &.separated {
    .card {
      &:not(:first-of-type) {
        &:not(:last-of-type) {
          @include add-border($card-border-size, $card-border-color, bottom);
          @include set-border-radius($card-border-radius);
        }
      }

      &:first-of-type {
        @include add-border($card-border-size, $card-border-color, bottom);
        @include set-border-radius($card-border-radius);
      }

      &:last-of-type {
        @include set-border-radius($card-border-radius);
      }

    }
  }

}

//
// STANDARD ACCORDION TYPE
// ======================================================

a.accordion {
  position: relative;

  &:before {
    @include transition;
    @extend %acc-pseudo;
    left: 0;
  }

  &.collapsed {
    &:before {
      content: $accordion-icon-collapsed;
    }
  }
}

//
// ACCORDION EXTENDED TYPE
// ======================================================

.accordion.extended {

  @each $themeName, $value in $themes-map {
    $colors: map-get-strict($value, 'main-colors');
    @each $scheme, $tone in $colors {
      &.accordion-#{$scheme} {
        .card {
          @include border-theme($scheme);
        }

        & [data-toggle="collapse"] {
          @include border-theme($scheme, dark);
          @include background-text-theme($scheme, dark);

          &.collapsed {
            @include background-theme($scheme);

            &:hover {
              @include background-theme($scheme, dark);
            }
          }
        }

        &.outline {
          & [data-toggle="collapse"] {
            @include border-theme($scheme);
          }
        }

        &.separated {
          .card {
            &:not(:first-of-type) {
              &:not(:last-of-type) {
                @include border-theme($scheme);
              }
            }

            &:first-of-type {
              @include border-theme($scheme);
            }
          }
        }
      }
    }
  }

  // Outline type
  &.outline {
    & [data-toggle="collapse"] {
      &.collapsed {
        background-color: transparent !important;
        color: $accordion-title-color !important;

        &:hover {
          background-color: $accordion-header-collapsed-hover-bg !important;
          color: $accordion-title-hover-color !important;
        }
      }
    }
  }

}

//
// ACCORDION EXTENDED - UNDERLINE TYPE
// ======================================================

.accordion {
  &.extended-underline {
    .card {
      border: 0;
    }

    & [data-toggle="collapse"] {
      @include add-border($accordion-ext-border-size, $card-border-color, bottom);
      //@include border-theme($accordion-ext-theme-scheme);
      background-color: transparent;
      padding-left: 40px;

      &:before {
        @extend %acc-pseudo;
        right: 0;
        left: 1rem;
      }

      &:after {
        display: none;
      }

      &.collapsed {
        @include add-border($accordion-ext-border-size, $card-border-color, bottom);

        &:before {
          content: $accordion-icon-collapsed;
        }
      }
    }

  }
}

//
// ACCORDION EXTENDED - LEFT LINE TYPE
// ======================================================

.accordion {
  &.extended-left-line {
    .card {
      @include set-border-radius(0);
      border: 0;
    }

    & [data-toggle="collapse"] {
      @include set-border-radius(0);
      @include add-border($accordion-ext-border-size, transparent, left);
      @include add-border(0, transparent, bottom);
      @include border-theme($accordion-ext-theme-scheme);
      padding-left: 40px;

      &:before {
        @extend %acc-pseudo;
        right: 0;
        left: 1rem;
      }

      &:after {
        display: none;
      }

      &.collapsed {
        @include add-border(0, transparent, bottom);
        @include border-theme($accordion-ext-theme-scheme);

        &:before {
          content: $accordion-icon-collapsed;
        }
      }

    }

    & .collapsing,
    & .collapse.show {
      @include add-border($accordion-ext-border-size, transparent, left);
      @include border-theme($accordion-ext-theme-scheme);
    }
  }
}